# W3D1

流水线在处理的过程中会有结构的、数据的、控制的 hazards

## 结构 Hazard

一个时刻，有两条或两条以上的指令使用了同一个部件

## 数据 Hazard

主要有写后读（RAW）、读后写（WAR）、写后写（WAW）三种常见情况

最简单的解决方法是加 bubbles ，牺牲性能

从硬件上，可以加入前向 forward，提前传递信号

从软件上，由编译器安排代码顺序减少数据依赖

## 控制 Hazard

分支跳转指令的条件不确定，程序需要等待直到确定下一条指令

用流水线或使用 nop 指令处理跳转

可以采用分支预测的方法，如二位饱和预测器。但是预测失败会浪费周期

还可以采用填充的方法，即寻找一些无论是否跳转都会执行的指令，最大限度减少周期的浪费。但是效率的提升有限

